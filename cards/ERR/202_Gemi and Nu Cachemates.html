<html>
<head>
  <title>Gemi and Nu, Cachemates</title>
  <link rel="icon" type="image/x-icon" href="/sets/ERR-files/icon.png">
  <link rel="stylesheet" href="/resources/mana.css">
  <link rel="stylesheet" href="/resources/header.css">
</head>
<style>
	@font-face {
	  font-family: Beleren;
	  src: url('/resources/beleren.ttf');
	}
	body {
		font-family: 'Helvetica', 'Arial', sans-serif;
		overscroll-behavior: none;
		margin: 0px;
		background-color: #f3f3f3;
	}
	a {
		text-decoration: none;
	}
	.banner-container {
		width: 100%;
		background-color: #bbbbbb;
		display: flex;
		justify-items: center;
		align-items: center;
	}
	.set-banner {
		font-family: Beleren;
		display: flex;
		gap: 30px;
		align-items: center;
		justify-items: center;
		font-size: 40px;
		color: #171717;
		margin: auto;
		padding-top: 10px;
		padding-bottom: 10px;
	}
	.set-banner img {
		width: 100px;
	}
	.grid-container {
		justify-items: center;
	}
	.image-grid {
		padding-top: 40px;
		width: 70%;
		max-width: 1000px;
		margin: auto;
		display: grid;
		grid-template-columns: minmax(200px, 2fr) minmax(200px, 2.5fr);
		gap: 30px;
		padding-bottom: 10px;
		justify-items: center;
	}
	.image-grid img {
		position: relative;
	}
	.card-image {
		float: left;
		width: 100%;
		max-width: 375px;
		height: auto;
		display: block;
	}
	.story-text {
		padding-top: 20px;
		padding-bottom: 20px;
		padding-left: 50px;
		padding-right: 50px;
		background: #fcfcfc;
		width: 50%;
		border: 1px solid #d5d9d9;
		border-top: 3px solid #171717;
		border-bottom: 3px solid #171717;
		border-radius: 6px;
		height: fit-content;
		min-height: 75%;
		display: flex;
		flex-direction: column;
		margin-left: auto;
		margin-right: auto;
		margin-top: 20px;
		margin-bottom: 20px;
	}
	.story-text div {
		white-space: normal;
		font-size: 15px;
		padding-bottom: 10px;
		padding-left: 12px;
		padding-right: 12px;
		line-height: 155%;
	}
	.story-text .story-title{
		font-weight: bold;
		font-size: 20px;
		white-space: pre-wrap;
	}
	.card-text {
		padding-top: 20px;
		padding-bottom: 20px;
		background: #fcfcfc;
		width: 100%;
		border: 1px solid #d5d9d9;
		border-top: 3px solid #171717;
		border-bottom: 3px solid #171717;
		border-radius: 6px;
		height: fit-content;
		min-height: 75%;
		margin-top: 3%;
		display: flex;
		flex-direction: column;
	}
	.card-text div {
		white-space: normal;
		font-size: 15px;
		padding-bottom: 10px;
		padding-left: 12px;
		padding-right: 12px;
		line-height: 155%;
	}
	.card-text .name-cost {
		font-weight: bold;
		font-size: 20px;
		white-space: pre-wrap;
	}
	.card-text .type {
		font-size: 16px;
	}
	.card-text .pt {
		font-weight: bold;
	}
	.card-text br {
		content: "";
		display: block;
		margin-bottom: 5px;
	}
	.card-text .printings {
		margin-top: auto;
		font-size: 12px;
		font-weight: bold;
		padding-bottom: 0px;
	}
	.printings {
		display: none;
	}
	.printings a {
		color: #1338be;
		text-decoration: none;
	}
	.printings a:hover {
		color: #0492c2;
	}
	.img-container {
	  position: relative;
	  align-self: center;
	}
	.img-container img {
	  width: 100%;
	  height: auto;
	}
	.img-container .btn {
		background: url('/img/flip.png') no-repeat;
		background-size: contain;
		background-position: center;
		width: 15%;
		height: 11%;
		cursor: pointer;
		border: none;
		position: absolute;
		left: 50%;
		top: 48%;
		transform: translate(-50%, -50%);
		opacity: 0.5;
	}
	.img-container .btn:hover {
		background: url('/img/flip-hover.png') no-repeat;
		background-size: contain;
		background-position: center;
	}
	.img-container .h-img {
		transform: rotate(90deg);
		width: 80%;
	}
	.img-container a {
		height: 100%;
		display: grid;
		justify-self: center;
		align-items: center;
		justify-items: center;
	}
	.img-container a > * {
		grid-row: 1;
		grid-column: 1;
	}
	.hidden {
		display: none;
	}
</style>
<body>
	<div class="header">
		<div class="search-grid">
			<a href="/"><img class="sg-logo" src="/img/banner.png"></a>
			<img class="sg-icon" src="/img/search.png">
			<input type="text" inputmode="search" placeholder="Search ..." name="search" id="search" spellcheck="false" autocomplete="off" autocorrect="off" spellcheck="false">
			<a href="/all-sets"><img src="/img/sets.png" class="sg-icon">Sets</a>
			<a href="/deckbuilder"><img src="/img/deck.png" class="sg-icon">Deckbuilder</a>
			<a onclick="randomCard()"><img src="/img/random.png" class="sg-icon">Random</a>
		</div>
	</div>

	<input type="text" id="display" class="hidden" value="cards-and-text"> <!-- here to make img-container-defs snippet work properly -->
	<div class="banner-container">
		<a class="set-banner" id="set-banner" href="/sets/ERR">
			<img class="set-logo" src="/sets/ERR-files/icon.png">
			<div class="set-title">Errors in the Weft</div>
		</a>
	</div>

	<div class="grid-container" id="grid">
	</div>
	
	<script>
		let card_list_arrayified = [];
		let specialchars = "";

		document.addEventListener("DOMContentLoaded", async function () {
			await fetch('/lists/all-cards.json')
					.then(response => response.json())
					.then(json => {
						card_list = json;
				}).catch(error => console.error('Error:', error));

				await fetch('/resources/replacechars.txt')
					.then(response => response.text())
					.then(text => {
						specialchars = text; 
				}).catch(error => console.error('Error:', error));

				card_list_arrayified = card_list.cards;

			await fetch('/cards/ERR/202_Gemi and Nu Cachemates.json')
				.then(response => response.json())
				.then(json => {
					card = json;
			}).catch(error => console.error('Error:', error));

			document.getElementById("grid").appendChild(gridifyCard(card, false, true));
			if (document.getElementById("other-printings"))
			{
				document.getElementById("card-text").appendChild(document.getElementById("other-printings"));
				document.getElementById("other-printings").style.display = "block";
			}
		
			const story = document.createElement("div");
			story.className = "story-text";
			story.id = "story-text";
			document.getElementById("grid").appendChild(story);

			const story_title = document.createElement("div");
			story_title.className = "story-title";
			story_title.innerHTML = "Weft Trace 03: The Cachemates";
			story.appendChild(story_title);

			const story_content = document.createElement("div");
			story_content.className = "story-body";
			story_content.innerHTML = "<p>&emsp;&emsp;&emsp;&emsp;&emsp;Whoever had designed the Overflow Sea had clearly never been in a hurry. It consisted of annoyingly tiny islands which one had to travel between on twee custom portals, one hop at a time. Nu brushed some soot out of his fur. The last one had been fire dancing themed.<br><p>&emsp;&emsp;&emsp;&emsp;&emsp;This particular portal took the form of a flaming raft zipping across the water, throwing up a steaming spray behind it. As he traveled, the sky faded from deep night to a pastel-hued sunset and the temperature picked up. Nu shifted out his skintight jumpsuit for something a bit looser.<br><p>&emsp;&emsp;&emsp;&emsp;&emsp;His current body of choice was an altered - a humanoid body with animal characteristics, in his case those of a predatory cat. His fur was sleek textured gray and his eyes were piercing. He thought the overall effect was modern and imposing.<br><p>&emsp;&emsp;&emsp;&emsp;&emsp;He stared up into the middle distance. He was looking for juggling routines.<br><p>&emsp;&emsp;&emsp;&emsp;&emsp;He found one, performed by one SomonSays 2400 years ago. It looked doable. He produced five tiny metal cubes from his sleeve. They unfolded in his hand, apertures sliding open to allow telescoping pillars to emerge and expand. Curved metal surfaces emerged from slots, rotated, and clicked into position. He was now holding five light metal spheres, their surfaces marked with cosmetic ridges, joints, and blinking lights. He began to juggle them.<br><p>&emsp;&emsp;&emsp;&emsp;&emsp;Hopefully SomonSays wasn’t part of the troupe he was joining. That would be awkward.<br><p>&emsp;&emsp;&emsp;&emsp;&emsp;The raft stuttered and jumped as the next island came into view. It was a small isle in soft colours with a spiraling path around a single mountain. The path was lined with palm trees that swayed in the breeze like stuffed toys.<br><p>&emsp;&emsp;&emsp;&emsp;&emsp;The plank of the raft beneath Nu bucked and poofed into a plush facsimile of itself. Soon, so did the remainder of the raft and Nu’s juggling balls. The sudden floatier behaviour made him drop the pattern. Now that the island was closer, he could see that every surface, from the rock faces of the mountain to the trees to the beach his raft was pulling into, was made of soft fabric. He felt a sneeze coming on. He tried to resist it, but the spasm overtook him, sproinging his body into a plush form. It kept its musculature as quilted patches, but the soft shading of his fur became a patchwork of contrasting colours and his lionish face was replaced by the placid smile of a cartoon cat. The raft jolted to a stop, spilling him onto the beach.<br><p>&emsp;&emsp;&emsp;&emsp;&emsp;A lavender-coloured stuffed bear with a big red spot sewn into its face leapt out at him from behind a denim fern.<br><p>&emsp;&emsp;&emsp;&emsp;&emsp;“Welcome to Gemi’s Isle!” it said. A burst of confetti appeared from nowhere and vanished before it could hit the ground.<br><p>&emsp;&emsp;&emsp;&emsp;&emsp;“Gemi’s Isle is a funtastic experience! - there’s puzzles, games, and a whole island to explore as you make your way to the peak! If you get all the way to the end, you can add your plush self to the island as a character!” The bear gestured at a platform suspended from one of the swaying trees, where a few stuffed animals waved back. It looked like it could hold quite a few more.<br><p>&emsp;&emsp;&emsp;&emsp;&emsp;“Thank you,” said Nu. He pulled his avatar from a downlink backup and reloaded it. It plushified immediately. “But I’m in a bit of a rush and just need to find a way to the next island.”<br><p>&emsp;&emsp;&emsp;&emsp;&emsp;The bear pouted. “If you don’t want to do the whole island, how about doing the first part? Then you’ll be at the docks on the back of the island, and you can leave from there.”<br><p>&emsp;&emsp;&emsp;&emsp;&emsp;Nu walked past the bear. It scampered to get back in front of him.<br><p>&emsp;&emsp;&emsp;&emsp;&emsp;“The first challenge is a scavenger hunt! The path to the next section is blocked by a door that can only be unlocked by putting in the 9 puzzle pieces scattered all over this beach. You’ll have to…” The bear, not watching where it was going, walked into a tree and bounced backwards.<br><p>&emsp;&emsp;&emsp;&emsp;&emsp;Nu was climbing the wall on which the puzzle door was inset. He had managed to get his claws, at least, back to normal. The sandy stone wall was a rough burlap that was no problem to climb. He threw himself over the top and hit an invisible wall. He was thrown back and landed sprawled on the beach.<br><p>&emsp;&emsp;&emsp;&emsp;&emsp;The bear stood over him. “Nice try, mister! You’ll need to climb to get one of the pieces, but not that way. Try going…”<br><p>&emsp;&emsp;&emsp;&emsp;&emsp;Nu pointed a palm at the bear. It melted like hot plastic. Steam and oil wicked off it as it deflated. Soon, all that remained was a marbled puddle.<br><p>&emsp;&emsp;&emsp;&emsp;&emsp;The island was quiet for a moment.<br><p>&emsp;&emsp;&emsp;&emsp;&emsp;“What the hell is your problem?” A different voice came from behind one of the burlap walls. A zipper materialized on its surface and zipped out a rough doorway, and a user stepped through. She was another altered - doglike rather than catlike, more feminine and wearing a tropical dress patterned like splattered paint. “You come to my island, the least you could do is play along a bit.”<br><p>&emsp;&emsp;&emsp;&emsp;&emsp;“The daemon was bothering me,” said Nu.<br><p>&emsp;&emsp;&emsp;&emsp;&emsp;“You could have just told it that,” said Gemi. “That hurt.”<br><p>&emsp;&emsp;&emsp;&emsp;&emsp;“You hooked a daemon’s senses up to your mind and let it walk around? How does that even work?” Nu stared off into space for a moment. “Anyways, as I told your daemon, I’m in a bit of a rush.” He moved to walk towards the puzzle door again, but Gemi stood in his way.<br><p>&emsp;&emsp;&emsp;&emsp;&emsp;“How could you be in a rush? Whatever you’re going to, it’ll be here tomorrow, or next year if you need it to. In the Buffer,” she stated, “We take our time.”<br><p>&emsp;&emsp;&emsp;&emsp;&emsp;“It’s a juggling troupe, and I said I’d be there for a limited time, which begins soon. So, if you’ll excuse me...”<br><p>&emsp;&emsp;&emsp;&emsp;&emsp;“Heading through here, that must be the Seven Cycles. They perform every week. You can take in the sights, you know. Who knows, maybe you can try out your routine for me. I’d like to see it.” She did not look like she wanted to see it.<br><p>&emsp;&emsp;&emsp;&emsp;&emsp;“Haven’t really decided on a routine yet,” said Nu. “I’ll look up something on the way there.”<br><p>&emsp;&emsp;&emsp;&emsp;&emsp;Gemi sputtered. “What is the point of joining the Seven Cycles if you don’t even have a routine you want to do?” She glared at Nu. “Wait, do you mean you’re just going to copy something? I’ll tell them! I’m pretty sure you can’t do that.” She jabbed a finger into his face. It went clean through.<br><p>&emsp;&emsp;&emsp;&emsp;&emsp;The hologram that was standing where Nu once stood fizzled and failed. Gemi turned around and saw the hole Nu had melted through the puzzle door. Through the hole she could see Nu, fully back in his normal form. He was skipping up the steps to the velvet portal that would take him to the next island.<br><p>&emsp;&emsp;&emsp;&emsp;&emsp;Gemi growled. The beach reared up around Nu and tried to buck him away. He fell back, but a silver gadget extended from his wrist to grap the portal’s edge. It yanked him forward, and he was through.<br><br><hr><br><p>&emsp;&emsp;&emsp;&emsp;&emsp;There was a sound like a dying scream.<br><p>&emsp;&emsp;&emsp;&emsp;&emsp;Without warning, a wave of static and pain washed over the isle. In its wake, the sky blinked and fizzled out. Textured fabric faded, revealing the bare polygons beneath.<br><p>&emsp;&emsp;&emsp;&emsp;&emsp;All over the Weft, lights were going out.<br><p>&emsp;&emsp;&emsp;&emsp;&emsp;Nu reached into the Downlink to steady himself and got back nothing but static and fear. The velvet portal shorted, squeezed, and blacked out, throwing him back onto the shore. The pain was everywhere, but his left hip especially felt like it was tearing apart.<br><p>&emsp;&emsp;&emsp;&emsp;&emsp;Gemi forced her eyes open and found herself lying face down on the ground. She rolled over. Every daemon and automated spectator was clutching their left side. Even the trees and stones were doubled over and shivering.<br><p>&emsp;&emsp;&emsp;&emsp;&emsp;Gemi closed her eyes again. She opened herself to the Downlink gradually. In the sea of grief she could make out other users. She could feel the tragic sensation reflecting and amplifying off of them. She tried to clear her mind.<br><p>&emsp;&emsp;&emsp;&emsp;&emsp;“Don’t just lie there!”<br><p>&emsp;&emsp;&emsp;&emsp;&emsp;Her eyes snapped open again. Nu had managed to find his feet and was swaying over to her. He gestured in the general direction of the island’s central mountain. It was slumping in on itself, having come loose from the isle’s custom floaty physics and become subject to the physical weight of a structure made of cloth ten stories high.<br><p>&emsp;&emsp;&emsp;&emsp;&emsp;Gemi didn’t bother trying to stand up. She pulled herself to him hand over hand. Nu threw some tiny metal cubes on the ground. They unfolded and merged into a metal shield that enclosed around them. The last panel clicked into place just as the collapsing cloth hit it. The shield squealed and strained under the weight.<br><p>&emsp;&emsp;&emsp;&emsp;&emsp;“This is an excessive way of keeping me here,” he said.<br><p>&emsp;&emsp;&emsp;&emsp;&emsp;“You think I did this?”<br><p>&emsp;&emsp;&emsp;&emsp;&emsp;“Is there anyone else here?” The shield sagged down a few centimeters.<br><p>&emsp;&emsp;&emsp;&emsp;&emsp;“It’s the Downlink. Something bad happened out there.” Another mountainous fold of cloth landed on the pile above them, making rivets pop under the increased weight.<br><p>&emsp;&emsp;&emsp;&emsp;&emsp;“Then cut us off!” Nu banged on the shield, putting up a central strut for more strength.<br><p>&emsp;&emsp;&emsp;&emsp;&emsp;“I was working on it!”<br><p>&emsp;&emsp;&emsp;&emsp;&emsp;Gemi focused. The whole island faded out of existence, leaving the two of them floating a few meters off the ground. Beneath them was a circular disk of untextured black material, just barely above the waterline. Nu managed to signal the shield to retract into itself as they fell. They hit the ground hard. Metal cubes clattered around them.<br><p>&emsp;&emsp;&emsp;&emsp;&emsp;The pain cut out, leaving a gasping afterburn. They both collapsed onto their backs.<br><p>&emsp;&emsp;&emsp;&emsp;&emsp;The sky was scattered with stars. There was nothing around them but deep black sea.<br><br><hr><br><p>&emsp;&emsp;&emsp;&emsp;&emsp;Gemi staggered to her feet. Her left hip still burned with phantom pain, but it was fading. Under the dim starlight, it was hard to tell for certain, but it seemed like no physical injuries remained. She began to walk around the island’s edge, tracing a scalloped pattern with her foot. Where she touched the black surface, green felt bloomed. It was relaxing work.<br><p>&emsp;&emsp;&emsp;&emsp;&emsp;“What are you doing?” asked Nu. He was still lying on his back.<br><p>&emsp;&emsp;&emsp;&emsp;&emsp;“Rebuilding the island,” said Gemi. She had the outline now. She conjured a bus-sized  block of upholstery foam and began to carve it into a rough mound shape.<br><p>&emsp;&emsp;&emsp;&emsp;&emsp;“It’s impossible for you to have every asset stored locally. You won’t be able to finish rebuilding without downlink access.” said Nu.<br><p>&emsp;&emsp;&emsp;&emsp;&emsp;Gemi finished up the hill and turned to the location where a mountainous ridge should be. “Would you like to help, or are you just going to lie there?”<br><p>&emsp;&emsp;&emsp;&emsp;&emsp;Nu didn’t respond. He wasn’t lying in the centre of the island anymore. He was standing at the edge, staring down into the water. Waves lapped at his feet.<br><p>&emsp;&emsp;&emsp;&emsp;&emsp;“There’s something down there,” he said.<br><p>&emsp;&emsp;&emsp;&emsp;&emsp;Gemi joined him. Deep in the water was a huge skeletal serpent that glowed green. Jets of boiling steam and sudden icicles clouded the water as it passed.<br><p>&emsp;&emsp;&emsp;&emsp;&emsp;It was heading towards them.<br><p>&emsp;&emsp;&emsp;&emsp;&emsp;“Must be an error. The Stack’s had an advisory out for them since that racing incident.” He crossed his arms. “We should do something about that,” said Nu. “I’ll build a weapons platform.”<br><p>&emsp;&emsp;&emsp;&emsp;&emsp;“You have an island-sized weapons platform model just lying around in your local cache?” said Gemi. The wind picked up as the error approached, picking up loose blocks of foam and carrying them out to sea.<br><p>&emsp;&emsp;&emsp;&emsp;&emsp;“I’ll figure something out. I build stuff like this all the time.”<br><p>&emsp;&emsp;&emsp;&emsp;&emsp;Nu traced out a large rectangle covering most of the island. Metal plates covered in knobs and ridges emerged from the island’s surface, clicking into place to form the first few layers of a seamless pyramid.<br><p>&emsp;&emsp;&emsp;&emsp;&emsp;“How big is this thing going to be?” said Gemi. The island sagged and dipped under the weight of the erupting metal.<br><p>&emsp;&emsp;&emsp;&emsp;&emsp;The foundation leveled off with a flat surface, which Nu began to dot with struts. “Pretty big? It’s going to get one shot off maximum, so it’s got to have some power behind it. One big harpoon. Kind of an arbalest.” He wasn’t looking at Gemi, instead inspecting the assembly of a massive hinge. “If you want to make yourself useful, get me some shock absorbers on the base.”<br><p>&emsp;&emsp;&emsp;&emsp;&emsp;Gemi folded her arms. “I don’t think any shock absorbers in the world are going to help here. This base was built for vacation homes, not superweapons.”<br><p>&emsp;&emsp;&emsp;&emsp;&emsp;Nu ignored her. He was laying out the compound springs that would power the weapon. As the error approached the island, the sea became choppy. Sudden spikes of pressure and temperature created bursting splashes of water that fell as harsh rain.<br><p>&emsp;&emsp;&emsp;&emsp;&emsp;Nu aimed the arbalest down into the water. The harpoon in its chamber was nearly the length of the island. The ratchets clicked as the springs built up force. The error wasn’t visible behind the froth and spray of the water’s surface. Any moment now.<br><p>&emsp;&emsp;&emsp;&emsp;&emsp;He fired. The whole island reared back with the recoil, tilting the aim up. The harpoon skipped along the surface of the water like a stone.<br><p>&emsp;&emsp;&emsp;&emsp;&emsp;The error collided with the underside of the island. It tilted over 30, 40 degrees, plunging half of the disk’s surface into the water.<br><p>&emsp;&emsp;&emsp;&emsp;&emsp;“Jump down here!” said Gemi. Nu looked down. She had summoned one of her fabric trees and bent it down as a cartoonish catapult. She was sitting on the canopy, lashed down with rope. Nu landed on top of her. The ropes gave, and the contraption flung the two of them out to sea.<br><p>&emsp;&emsp;&emsp;&emsp;&emsp;They hit the water hard. It was turbulent and murky. In patches it was freezing cold and burning hot. Chaotic waves submerged them. Nu managed to get a hold of Gemi and summon another shield around the two of them. This one was a shell fully enclosing them. In the tumult of the water, it came out lopsided and egg-shaped. Gemi had to duck her head to avoid getting it cut off as the last panels closed.<br><p>&emsp;&emsp;&emsp;&emsp;&emsp;The waves tossed the makeshift craft around, spinning and rolling it. They crashed and tangled into each other. Gemi flailed and managed to get her hand on one side of the egg. On its exterior, buoyant balloons puffed into place. The egg still rocked in the current, but now one side stayed up.<br><p>&emsp;&emsp;&emsp;&emsp;&emsp;The interior of the egg was cramped and inconveniently round. Water pooled at the bottom. Meaningless blinking lights on the walls barely illuminated Gemi and Nu’s wet fur. Waves breaking against the hull could be heard as deep thuds. They couldn’t see the outside at all.<br><p>&emsp;&emsp;&emsp;&emsp;&emsp;“Why didn’t you tell me the island was just a floating disk?” shouted Nu. His voice echoed in the enclosed space, fading out into a metallic buzz. He tried to turn his back to Gemi but the space was too small to do anything but sit in the pool of water right next to her.<br><p>&emsp;&emsp;&emsp;&emsp;&emsp;They sat and listened. They could hear the error appraching, causing points on the metal to develop patches of ice or glow red-hot. They shifted in their seats, trying to avoid those spots. The metal creaked as the thermal expansion strained it.<br><p>&emsp;&emsp;&emsp;&emsp;&emsp;The error passed, and the effect faded. The air inside the egg was beginning to feel a bit muggy.<br><p>&emsp;&emsp;&emsp;&emsp;&emsp;“Wouldn’t have worked anyways,” said Nu. “Too much recoil. Couldn’t really aim well. Who knows how the projectile would have reacted with the water’s surface.” He rubbed his hand over a section of the egg that had sprung a small leak, mending it.<br><p>&emsp;&emsp;&emsp;&emsp;&emsp;“I could have explained myself better,” grumbled Gemi. The egg was beginning to tilt a little in the water. “Not like anything I was doing was going to solve anything.” On instinct, she almost reached out into the Downlink to escape the conversation, then caught herself.<br><p>&emsp;&emsp;&emsp;&emsp;&emsp;“I suppose we should try to kill it again,” she said.<br><p>&emsp;&emsp;&emsp;&emsp;&emsp;Nu transitioned from a sitting position to a squat so he could rest a hand on the egg’s upper surface.<br><p>&emsp;&emsp;&emsp;&emsp;&emsp;“This is almost certainly not going to work,” he said.<br><p>&emsp;&emsp;&emsp;&emsp;&emsp;“I know.”<br><p>&emsp;&emsp;&emsp;&emsp;&emsp;The top of the egg whirred back, revealing the stormy sky.<br><p>&emsp;&emsp;&emsp;&emsp;&emsp;Gemi stretched to her feet and nearly capsized their craft. She gestured out, and puffy pillows of light pink and purple spread out from the egg like the petals of a flower, creating a wide floating platform.<br><p>&emsp;&emsp;&emsp;&emsp;&emsp;Nu staggered out of the metal shell and onto the fabric. He gasped for fresh air. “Leave some holes,” he shouted at Gemi. “I’ll plant sensors going down into the water.”<br><p>&emsp;&emsp;&emsp;&emsp;&emsp;“Got it,” said Gemi. “Look for the dark red petals; I’ll put a hole through them.”<br><p>&emsp;&emsp;&emsp;&emsp;&emsp;They yelled back and forth as they worked. The flower soon had high metal walls to keep out the sea spray and a low fabric hull to keep it stable against the waves.<br><p>&emsp;&emsp;&emsp;&emsp;&emsp;The rain became scalding hot and then switched to hail. Nu laid a hand on the flower’s surface. “The error’s coming.”<br><p>&emsp;&emsp;&emsp;&emsp;&emsp;“Which way?”<br><p>&emsp;&emsp;&emsp;&emsp;&emsp;Nu pointed down and slightly to the left. He shifted his arms slightly, tracking the error. This wasn’t working.<br><p>&emsp;&emsp;&emsp;&emsp;&emsp;“Just - follow my wire.”<br><p>&emsp;&emsp;&emsp;&emsp;&emsp;A metal strand shot out from beneath the flower. Gemi felt its weight, its passing. She cast her sensation out to it. She willed it to sprout heavy cushioning foam like grapes from a vine. Nu led more sensors out through the padding. The top of the strand weaved through the water.<br><p>&emsp;&emsp;&emsp;&emsp;&emsp;“Brace!” shouted Nu.<br><p>&emsp;&emsp;&emsp;&emsp;&emsp;The error hit them hard. The flower bucked and lifted a few meters out of the water. The foam freezed, burned, and compressed under the strain. Gemi and Nu snapped out of their trance and rolled across the cushioned surface.<br><p>&emsp;&emsp;&emsp;&emsp;&emsp;They were still afloat.<br><p>&emsp;&emsp;&emsp;&emsp;&emsp;The sea around them sputtered vindictively. Needle-thin spires of water appeared on the surface, stretching up to infinity before crashing down as booming waterfalls of mist. Gemi and Nu huddled under the flower’s wall. Gemi gestured behind them, unable to be heard over the din.<br><p>&emsp;&emsp;&emsp;&emsp;&emsp;They immersed their sensation in the material again.<br><p>&emsp;&emsp;&emsp;&emsp;&emsp;Gemi sprouted pressurized balloons from the island on one side, forming a honeycomb curtain. Nu’s curious metal followed them, adding a solid hexagonal truss for them to anchor to. A central fin descended from the flower. Air tanks, hydrodynamic surfaces, and trigger wires climbed and flowered around it.<br><p>&emsp;&emsp;&emsp;&emsp;&emsp;The error drew close. All the wires and seams held their breath.<br><p>&emsp;&emsp;&emsp;&emsp;&emsp;By wordless agreement they held on until the last moment. They exhaled. The balloons popped. Propellers spun up and air tanks released. The flower reared up and jetted forward a distance of twice its length. It glid forward on a streamlined hull, now more the shape of a tubby boat.<br><p>&emsp;&emsp;&emsp;&emsp;&emsp;The error breached the water’s surface where they had been a moment ago.<br><p>&emsp;&emsp;&emsp;&emsp;&emsp;It hovered in the air, held aloft by spasms of thrust that rattled through its skeletal frame. Pockets of air around it hollowed out to vacuum and rolled over into ultra-high pressures, distorting light and emitting percussive bangs. It turned towards them and sagged down into the water.<br><p>&emsp;&emsp;&emsp;&emsp;&emsp;It jerked towards them. Nu snapped tightly wound metal and joints into the hull. It waved and flexed, propelling them forward and around. The storm turned to heavy sleet, weighing down the vessel. Gemi wove a watertight dome over their heads.  She added elongated fins behind the hull, giving it the form of a fish’s tail. They pushed their way around the error, dancing, learning its movements.<br><p>&emsp;&emsp;&emsp;&emsp;&emsp;It pursued them. Nu added a long spine down their tail, extending it into a more streamlined shape. They were a curious fish, bulbous domed head propelled by a graceful tail. They wouldn’t be able to outrun it forever.<br><p>&emsp;&emsp;&emsp;&emsp;&emsp;They turned to face the eror. Two giant arms sprouted from their sides, interlocking steel and rope forming musculature and nerves. One arm blossomed into a shield. The other unfolded into a sword. When the error next approached, they did not dodge but caught the blow head on, batting it back with a mighty swing. The error sank deep into the sea.<br><p>&emsp;&emsp;&emsp;&emsp;&emsp;They reared up on their tail. Their torso extended up, forming proper shoulders and an impassive carnivorous head. They plunged forward into the water and dove.<br><br><hr><br><p>&emsp;&emsp;&emsp;&emsp;&emsp;They were a mermaid four stories in length. Iridescent patches of waterproof fabric formed over joints. He was the pistons that drove the tail back and forth. She was the plumes that guided and smoothed the thrust. He was the glow in their eyes that illuminated the error ahead of them. She was the bellows that reduced their buoyancy and pulled them deeper. They were catching up to it.<br><p>&emsp;&emsp;&emsp;&emsp;&emsp;The Overflow Sea had no bottom they could detect. There was no light but for the glow of their eyes and the flashes of superheated water around the error. The sword in their hand retracted and folded around itself, becoming a harpoon nearly as tall as they were. Blue tracing lights glimmered on its point. He was the tip of the spear and she the arm that moved it. The harpoon sliced through the water, trailing a cable of braided metal and fibre.<br><p>&emsp;&emsp;&emsp;&emsp;&emsp;The point intersected the error for a moment. It inflated, lodging inside the error’s ribcage. The cable stretched and pulled them forward. They climbed towards the error hand over hand.<br><p>&emsp;&emsp;&emsp;&emsp;&emsp;They were close enough now to feel the pressure buckle and underflow in the error’s presence. One hand became a shield, blossoming out into a canopy while still grasping the cable in front of them. One hand became a spinning wheel, pulling strands from their shoulder and shooting them forward. Wire and ribbon tangled around the error. Some snapped and drifted down into the deep, but more replaced them. The error was soon wrapped in a cocoon of tension.<br><p>&emsp;&emsp;&emsp;&emsp;&emsp;They played with their prey. Cables could steer it and fins could guide it. They pulled up. They could feel the speed and the impacts trailing behind them. A precise yank made them corkscrew around. One hand extended out, trailing through the water. They could see the shine of the surface now.<br><p>&emsp;&emsp;&emsp;&emsp;&emsp;They breached. They cleared the waves by several stories. The error flopped and struggled in midair ahead of them. They pulled themselves forward along the cable in a fluid motion. They grabbed the error with both hands. Tendrils of metal shot through it. Pressure tanks and balloons sprouted within its ribs. As they hit the water, they pirouetted, cut the cables, and threw the error skyward. There was a glorious bang.<br><p>&emsp;&emsp;&emsp;&emsp;&emsp;Fragments of bone rained down upon the Overflow Sea.<br><p>&emsp;&emsp;&emsp;&emsp;&emsp;They splashed and danced as the storm faded. He was the keen eyes that could sense the black disk that was once Gemi’s Isle, floating in the waves. She was the gentle touch that righted it. The mermaid, nearly as big as the island that once stood here, curled around the disk’s edge. They grabbed it and held it fast.<br><p>&emsp;&emsp;&emsp;&emsp;&emsp;The mermaid’s chest opened and Gemi and Nu walked out.<br><p>&emsp;&emsp;&emsp;&emsp;&emsp;They walked across the disk hand in hand. They stepped over rivers of runoff from the mermaid’s soaked fabric. At the centre, Gemi raised a grassy mound and reclined on it. The air was humid and warm. Somewhere far away, a bird sang.<br><p>&emsp;&emsp;&emsp;&emsp;&emsp;She painted the sky with a swirling galaxy.<br><p>&emsp;&emsp;&emsp;&emsp;&emsp;Nu laid down next to her. “No pastels this time?” he asked.<br><p>&emsp;&emsp;&emsp;&emsp;&emsp;“I’m going for something a bit more adventurous,” she said. Columns of fog descended from above. They split up the skyline and spilled across the water. Misty light spilled from them.<br><p>&emsp;&emsp;&emsp;&emsp;&emsp;Nu sat up. “I suppose I should help,” he said. Mechanical pyramids rose across the isle, dotted with hovering orbs of light. One appeared right in front of them. Around it spun rings that matched the galaxy skybox far above.<br><p>&emsp;&emsp;&emsp;&emsp;&emsp;“Don’t you have somewhere to be?,” said Gemi. She pulled in close and watched him work.<br><p>&emsp;&emsp;&emsp;&emsp;&emsp;“They’ll wait.”<br>";
			story.appendChild(story_content);
			
		});

		function isDecimal(char) {
			return char >= '0' && char <= '9';
		}

		function tokenize(text) {
			let tokens = [];

			for (let i = 0; i < text.length; i++)
			{
				if (i < text.length - 1)
				{
					if (text[i + 1] == '/')
					{
						tokens.push(text.substring(i, i + 3));
						i = i + 2;
					}
					else if (isDecimal(text[i]) && isDecimal(text[i + 1]))
					{
						tokens.push(text.substring(i, i + 2));
						i = i + 1;
					}
					else
					{
						tokens.push(text[i]);
					}
				}
				else
				{
					tokens.push(text[i]);
				}
			}

			return tokens;
		}

		function symbolize(text) {
			//This isn't needed now that the { & } are put into the cost & text by the exporter
			//let tokens = tokenize(text);
			//let symText = "";
			//for (const token of tokens)
			//{
			//	symText = symText + "{" + token + "}";
			//}

			return formatTextHTML(text);
		}

		function formatTextHTML(str) {
			if(!str)
				return "";
			str = str.replace(/[{]([^}]+)[}]/g, function(matched, _1) {
				let letters = _1.toLowerCase()
				return '<span class="mana mana-cost mana-' + letters + '"></span>';
			})
			return str;
		}

		function gridifyCard(card_stats, card_text = false, rotate_card = false) {
			card_stats = card;
			const card_name = card_stats.card_name;

			const grid = document.createElement("div");
			grid.className = "image-grid";

			grid.appendChild(buildImgContainer(card_stats, false, rotate_card));
			
			const text = document.createElement("div");
			text.className = "card-text";
			text.id = "card-text";

			const name_cost = document.createElement("div");
			name_cost.className = "name-cost";
			name_cost.innerHTML = card_stats.card_name + (card_stats.cost != "" ? '     ' + symbolize(card_stats.cost) : "");
			text.appendChild(name_cost);

			const type = document.createElement("div");
			type.className = "type";
			type.textContent = card_stats.type;
			text.appendChild(type);

			const effect = document.createElement("div");
			effect.className = "effect";
			let card_effects = "";
			if (card_stats.rules_text != "")
			{
				card_effects = card_stats.rules_text.split("\n");
			}
			else
			{
				card_effects = card_stats.special_text.split("\n");
			}
			effect.innerHTML += prettifyEffects(card_effects);
			text.appendChild(effect);

			if(card_stats.pt != "")
			{
				const pt = document.createElement("div");
				pt.className = "pt";
				pt.textContent = card_stats.pt;
				text.appendChild(pt);
			}
			else if (card_stats.loyalty != "")
			{
				const loyalty = document.createElement("div");
				loyalty.className = "pt";
				loyalty.textContent = "[" + card_stats.loyalty + "]";
				text.appendChild(loyalty);
			}

			// 13-name	14-color	15-type	16-ci	17-cost	18-ability	19-pt	20-special-text	21-loyalty
			if(card_stats.shape.includes("adventure") || card_stats.shape.includes("double") || card_stats.shape.includes("spli"))
			{
				const name_cost_2 = document.createElement("div");
				name_cost_2.className = "name-cost";
				name_cost_2.innerHTML = card_stats.card_name2 + (card_stats.cost2 != "" ? '     ' + symbolize(card_stats.cost2) : "");
				text.appendChild(name_cost_2);

				const type_2 = document.createElement("div");
				type_2.className = "type";
				type_2.textContent = card_stats.type2;
				text.appendChild(type_2);

				const effect_2 = document.createElement("div");
				effect_2.className = "effect";
				let card_effects_2 = "";
				if (card_stats.rules_text2 != "")
				{
					card_effects_2 = card_stats.rules_text2.split("\n");
				}
				else
				{
					card_effects_2 = card_stats.special_text2.split("\n");
				}
				effect_2.innerHTML += prettifyEffects(card_effects_2);
				text.appendChild(effect_2);

				if(card_stats.pt2 != "")
				{
					const pt_2 = document.createElement("div");
					pt_2.className = "pt";
					pt_2.textContent = card_stats.pt2;
					text.appendChild(pt_2);
				}
				else if (card_stats.loyalty2 != "")
				{
					const loyalty = document.createElement("div");
					loyalty.className = "pt";
					loyalty.textContent = "[" + card_stats.loyalty2 + "]";
					text.appendChild(loyalty);
				}
			}
			
			grid.appendChild(text);

			return grid;
		}

		function buildImgContainer(card_stats, hidden_title = false, rotate_card = false) {
			const imgContainer = document.createElement("div");
			imgContainer.className = "img-container";
			const id = card_stats.set + "-" + card_stats.number + "-" + document.getElementById("display").value;

			const img = document.createElement("img");
			img.className = "card-image";
			img.id = id;
			// (card_stats[13].includes("_") ? card_stats[13] : card_stats[0]) for posterity
			img.src = "/sets/" + card_stats.set + "-files/img/" + card_stats.number + (card_stats.shape.includes("token") ? "t_" : "_") + card_stats.card_name + ((card_stats.shape.includes("double")) ? "_front" : "") + "." + card_stats.image_type;
			
			const link = document.createElement("a");
			let card_name = card_stats.card_name;
			for (const char of specialchars)
			{
				card_name = card_name.replaceAll(char, "");
			}
			link.href = "/cards/" + card_stats.set + "/" + card_stats.number + "_" + card_name;
			link.appendChild(img);

			if ((card_stats.shape.includes("spli") || card_stats.type.includes("Battle")) && rotate_card)
			{
				const rotated_img = document.createElement("img");
				rotated_img.className = "h-img";
				rotated_img.id = "h-img";
				rotated_img.src = img.src;
				rotated_img.style.display = "block";
				img.style.filter = "blur(2px) brightness(0.7)";

				link.appendChild(rotated_img);
			}

			imgContainer.appendChild(link);

			if (card_stats.shape.includes("double"))
			{
				const imgFlipBtn = document.createElement("button");
				imgFlipBtn.className = "btn";
				imgFlipBtn.onclick = function() { imgFlip(id, rotate_card); };
				imgContainer.appendChild(imgFlipBtn);
			}

			if (hidden_title)
			{
				const title = document.createElement("div");
				title.innerText = card_stats.card_name;
				title.className = "hidden-text";
				imgContainer.appendChild(title);
			}

			return imgContainer;
		}

		function imgFlip(id, rotate_card = false) {
			img = document.getElementById(id);
			rotated_img = document.getElementById("h-img");

			cardName = img.src;
			
			if (cardName.includes("_front"))
			{
				img.src = cardName.replace("_front", "_back");

				if (rotate_card)
				{
					rotated_img.style.display = "none";
					img.style.filter = "";
				}
			}
			else
			{
				img.src = cardName.replace("_back", "_front");

				if (rotate_card)
				{
					rotated_img.style.display = "block";
					img.style.filter = "blur(2px) brightness(0.7)";
				}
			}
		}

		function prettifyEffects(card_effects) {
			let HTML = "";

			for (let i = 0; i < card_effects.length; i++)
			{
				let styled_effect = card_effects[i].replace(/\[i\]([^\]]+)\[\/i\]/g, function(matched, _1) {
					return '<i>' + _1 + '</i>'
				}).replace(/\[b\]([^\]]+)\[\/b\]/g, function(matched, _1) {
					return '<b>' + _1 + '</b>'
				})
				
				HTML += styled_effect;

				if (i != card_effects.length - 1)
				{
					HTML += "<br>"
				}
			}
			
			let regexHTML = symbolize(HTML);

			return regexHTML;
		}

		document.getElementById("search").addEventListener("keypress", function(event) {
		  if (event.key === "Enter") {
				event.preventDefault();
				search();
		  }
		});

		function search() {
			window.location = ("/search?search=" + document.getElementById("search").value);
		}

		function randomCard() {
				let i = Math.floor(Math.random() * (card_list_arrayified.length + 1));
				let card_name = card_list_arrayified[i].card_name;
				for (const char of specialchars)
				{
					card_name = card_name.replaceAll(char, "");
				}

				window.location = ('/cards/' + card_list_arrayified[i].set + '/' + card_list_arrayified[i].number + '_' + card_name);
			}
	</script>
</body>
</html>